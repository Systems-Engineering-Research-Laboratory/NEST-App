@using NEST_App.Models

@model dynamic

@{Layout = "~/Views/Shared/_Layout.cshtml";}
@{ViewBag.Title = "Index";}

<!DOCTYPE html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>

</head>
<body>
    <br />
    @*<h2> UAV Detail view </h2>*@
    <div class="outside">
        <div class="table">
            <table class="UAV_table" id="UAV_table">
                <tr>
                    <th>UAV ID</th>
                    <th>Callsign</th>
                    <th style="display: none;">NumDeliveries</th>
                    <th style="display: none;">Mileage</th>
                    <th>Battery</th>
                    <th>ETA</th>
                    <th style="display: none;">STA</th>
                    <th style="display: none;">Route</th>
                    <th style="display: none;">Availability</th>
                    <th style="display: none;">Configuration</th>
                    <th style="display: none;">current_lat</th>
                    <th style="display: none;">current_long</th>
                    <th style="display: none;">current_alt</th>
                    <th style="display: none;">dest_lat</th>
                    <th style="display: none;">dest_long</th>
                    <th style="display: none;">total_delivery</th>
                    <th style="display: none;">payload</th>
                    <th style="display: none;">Cost</th>
                </tr>
                @foreach (Mission miss in Model.missions)
                {
                    <tr id=@miss.Schedule.UAV.Id.ToString()>
                        <td>
                            @Html.DisplayFor(modelItem => miss.Schedule.UAV.Id)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => miss.Schedule.UAV.Callsign)
                        </td>
                        <td style="display: none;">
                            @Html.DisplayFor(modelItem => miss.Schedule.UAV.NumDeliveries)
                        </td>
                        <td style="display: none;">
                            @Html.DisplayFor(modelItem => miss.Schedule.UAV.Mileage)
                        </td>
                        <td id="battery_cell">
                            @Html.DisplayFor(modelItem => miss.Schedule.UAV.FlightStates.FirstOrDefault().BatteryLevel)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => miss.EstimatedCompletionTime)
                        </td>
                        <td style="display: none;">
                            @Html.DisplayFor(modelItem => miss.ScheduledCompletionTime)
                        </td>
                        <td style="display: none;">
                            @Html.DisplayFor(modelItem => miss.Phase)
                        </td>
                        <td style="display: none;">
                            @Html.DisplayFor(modelItem => miss.FlightPattern)
                        </td>
                        <td style="display: none;">
                            @Html.DisplayFor(modelItem => miss.Schedule.UAV.Configurations.Classification)
                        </td>
                        <td style="display: none;">
                            @Html.DisplayFor(modelItem => miss.Schedule.UAV.FlightStates.FirstOrDefault().Latitude)
                        </td>
                        <td style="display: none;">
                            @Html.DisplayFor(modelItem => miss.Schedule.UAV.FlightStates.FirstOrDefault().Longitude)
                        </td>
                        <td style="display: none;">
                            @Html.DisplayFor(modelItem => miss.Schedule.UAV.FlightStates.FirstOrDefault().Altitude)
                        </td>
                        <td style="display: none;">
                            @Html.DisplayFor(modelItem => miss.Latitude)
                        </td>
                        <td style="display: none;">
                            @Html.DisplayFor(modelItem => miss.Longitude)
                        </td>
                        <td style="display: none;">
                            @Html.DisplayFor(modelItem => miss.Schedule.UAV.NumDeliveries)
                        </td>
                        <td style="display: none;">
                            @Html.DisplayFor(modelItem => miss.Payload)
                        </td>
                        <td style="display: none;">
                            @Html.DisplayFor(modelItem => miss.FinancialCost)
                        </td>
                    </tr>
                }
            </table>
        </div>
        <div class="outer_detail_div" id="outer_detail_div">
            <p class="detail_title" id="detail_title">
                UAV #
            </p>

            <div class="detail_statue_metrics_div">
                <div class="detail_statue">
                    <p class="title">Statue</p>
                    <p class="details">
                        Delivering package <br />
                    <p class="details" id="ETA">ETA: </p>
                    <p class="details" id="STA">STA: </p>
                    <p class="details" id="route">Route:  </p>
                    <p class="details" id="avail">Availability: </p>
                    <p class="details" id="conf">Configuration:
                    <p class="details"> Current Coord: </p>
                    <p class="details" id="curr_lat"> &nbsp;&nbsp;&nbsp;&nbsp;LAT:&nbsp;&nbsp;&nbsp;&nbsp; </p>
                    <p class="details" id="curr_long"> &nbsp;&nbsp;&nbsp;&nbsp;LONG:&nbsp;</p>
                    <p class="details" id="curr_alt"> &nbsp;&nbsp;&nbsp;&nbsp;ALT:&nbsp;&nbsp;&nbsp;&nbsp;</p>
                    <p class="details"> Destination Coord:</p>
                    <p class="details" id="dest_lat"> &nbsp;&nbsp;&nbsp;&nbsp;LAT:&nbsp;&nbsp;&nbsp;&nbsp; </p>
                    <p class="details" id="dest_long"> &nbsp;&nbsp;&nbsp;&nbsp;LONG:&nbsp;</p>
                </div>
                <div class="detail_metrics">
                    <p class="title">Metrics</p>
                    <p class="details" id="battery"> Battery: </p>
                    <p class="details" id="mileage"> Total Miles: </p>
                    <p class="details" id="numdeliveries"> Current Delivery: </p>
                    <p class="details" id="total_deliveries"> Total Delivery: </p>
                </div>

                <div class="detail_acitivity">
                    <p class="title">Activity Log</p>
                    <p class="details">
                        <table>
                            <tr class="UAV_time_tr">
                                <td class="UAV_time_td">
                                    Base Off
                                </td>
                                <td class="UAV_time_td_2nd">
                                    9:00 AM
                                </td>
                            </tr>
                            <tr class="UAV_time_tr">
                                <td class="UAV_time_td">
                                    Re-routed
                                </td>
                                <td class="UAV_time_td_2nd">
                                    N/A
                                </td>
                            </tr>
                            <tr class="UAV_time_tr">
                                <td class="UAV_time_td">
                                    Force Land
                                </td>
                                <td class="UAV_time_td_2nd">
                                    N/A
                                </td>
                            </tr>
                            <tr class="UAV_time_tr">
                                <td class="UAV_time_td">
                                    Dest. Off
                                </td>
                                <td class="UAV_time_td_2nd">
                                    9:22 AM
                                </td>
                            </tr>
                            <tr class="UAV_time_tr">
                                <td class="UAV_time_td" id="UAV_time_td">
                                    Delivered #
                                </td>
                                <td class="UAV_time_td_2nd" id="UAV_time_td2">
                                    9:25 AM
                                </td>
                            </tr>
                            <tr class="UAV_time_tr">
                                <td class="UAV_time_td">
                                    Returning
                                </td>
                                <td class="UAV_time_td_2nd" id="UAV_time_td2;">
                                    9:26 AM
                                </td>
                            </tr>
                        </table>
                    </p>
                </div>
            </div>

            <div class="map">
                <div id="map-canvas"></div>
                <div class="detail_package">
                    <p class="title">Package</p>
                    <p class="details">
                        Dest. Addr: 3550 Nordhoff St, <br />
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Northridge, CA 91330 <br />
                    </p>
                    <p class="details" id="payload" style="margin-bottom: 2px;">Package Contents: </p>
                    <p class="details" id="cost"> Total Cost of Package: $</p>
                    <p class="details">Customer Notes: Please do not leave package by front door.</p>
                </div>
            </div>
        </div>
    </div>
    <div id="infobox"></div>
    <div id="infoboxAlert">
        <p id="infoboxP"style="visibility: hidden;">!</p>
    </div>
    <button onclick="Simulation()"> Go to Simulation Page </button>
    <button onclick="Adminview()"> Go to Admin Page </button>
</body>

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=drawing"></script>
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/jquery-signalR")
@Scripts.Render("~/signalr/hubs")
@Scripts.Render("~/bundles/detailsJS")
@Styles.Render("~/bundles/detailsCSS")
<script src="~/Scripts/MarkerWithLabel.js"></script>
<script src="~/Scripts/InfoBox.js"></script>
